Model %in% c("3", "9")) %>%
ggplot(aes(x = Match, y = Home, col = Model)) +
geom_line()
tibble(Model = c(rep("0", l), rep("3", l), rep("9", l), rep("10", l)),
Home = c(mod_0, mod_3, mod_9, mod_10),
Match = rep(1:l, 4)) %>%
filter(Match > l-380,
Model %in% c("3", "9")) %>%
ggplot(aes(x = Match, y = Home, col = Model)) +
geom_line()
load("~/GitHub/soccer-live-predictions/soccer-live-predictions/weight/data/HDA_dc.RData")
View(HDA_dc)
load("~/GitHub/soccer-live-predictions/soccer-live-predictions/transfermarkt/data/transfermarkt.RData")
View(transfermarkt)
library(dplyr)
library(future.apply)
plan(multisession(workers = 12))
source("pred/pred_mod_8.R")
source("pred/pred_mod_9.R")
source("pred/pred_mod_10.R")
load("2015-2020/data/mod_8.RData")
load("2015-2020/data/mod_9.RData")
load("2015-2020/data/mod_10.RData")
load("transfermarkt/data/results.RData")
pred_mod_8(mod_8, home_team = "Flamengo", away_team = "Vasco da Gama")
pred_mod_9(mod_9, home_team = "Flamengo", away_team = "Vasco da Gama", value_home = 79050000, value_away = 23150000)
pred_mod_10(mod_10, home_team = "Flamengo", away_team = "Vasco da Gama", value_home = 79050000, value_away = 23150000)
pred_mod_9(mod_9, home_team = "Flamengo", away_team = "Vasco da Gama", value_home = 790500000, value_away = 23150000)
pred_mod_10(mod_10, home_team = "Flamengo", away_team = "Vasco da Gama", value_home = 790500000, value_away = 23150000)
write.csv(HDA_dc, file = "HDA.csv")
write.csv(HDA_dc, file = "HDA.csv", sep = ";")
write.csv2(HDA_dc, file = "HDA.csv", sep = ";")
write.csv2(HDA_dc, file = "HDA.csv")
load("weight/data/predictions_mod_0_dc.RData")
load("predictions_mod_0_dc.RData")
load("data/predictions_mod_0_dc.RData")
predictions_mod_0_dc[[1]]$pred_0$Result
predictions_mod_0_dc[[i]]$pred_0$Result[1]
i=1
predictions_mod_0_dc[[i]]$pred_0$Result[1]
mean_mod_0 = NULL
seg_mom_mod_0 = NULL
for(i in 1:length(predictions_mod_0_dc)) {
mean_mod_0[i] = predictions_mod_0_dc[[i]]$pred_0$Result[1] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[1]) +
predictions_mod_0_dc[[i]]$pred_0$Result[2] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[2]) +
predictions_mod_0_dc[[i]]$pred_0$Result[3] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[3])
seg_mom_mod_0[i] = predictions_mod_0_dc[[i]]$pred_0$Result[1] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[1])^2 +
predictions_mod_0_dc[[i]]$pred_0$Result[2] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[2])^2 +
predictions_mod_0_dc[[i]]$pred_0$Result[3] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[3]^2)
}
mean_mod_0 = sum(mean_mod_0)
seg_mom_mod_0 = sum(seg_mom_mod_0)
var_mod_0 = seg_mom_mod_0 - mean_mod_0^2
mean_mod_0
seg_mom_mod_0
log(0)
which(predictions_mod_0_dc[[i]]$pred_0$Result)] == 0)
which(predictions_mod_0_dc[[i]]$pred_0$Result) == 0)
which(predictions_mod_0_dc[[i]]$pred_0$Result == 0)
mean_mod_0 = NULL
seg_mom_mod_0 = NULL
for(i in 1:length(predictions_mod_0_dc)) {
predictions_mod_0_dc[[i]]$pred_0$Result[which(predictions_mod_0_dc[[i]]$pred_0$Result == 0)] = 10^-5
mean_mod_0[i] = predictions_mod_0_dc[[i]]$pred_0$Result[1] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[1]) +
predictions_mod_0_dc[[i]]$pred_0$Result[2] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[2]) +
predictions_mod_0_dc[[i]]$pred_0$Result[3] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[3])
seg_mom_mod_0[i] = predictions_mod_0_dc[[i]]$pred_0$Result[1] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[1])^2 +
predictions_mod_0_dc[[i]]$pred_0$Result[2] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[2])^2 +
predictions_mod_0_dc[[i]]$pred_0$Result[3] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[3]^2)
}
mean_mod_0 = sum(mean_mod_0)
seg_mom_mod_0 = sum(seg_mom_mod_0)
var_mod_0 = seg_mom_mod_0 - mean_mod_0^2
mean_mod_0
var_mod_0
tibble(x = sims$pred_0$loglik_results_mod_0) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_0_pred_0, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 0 at minute 0")
library(knitr)
library(dplyr)
library(ggplot2)
load("data/goodness_of_fit_dc.RData")
for(i in 2:19) {
tab_results[i,] = tab_results[i,] - tab_results[1,]
}
kable(tab_results, digits = 4)
for(i in 2:19) {
tab_home_goals[i,] = tab_home_goals[i,] - tab_home_goals[1,]
}
kable(tab_home_goals, digits = 4)
for(i in 2:19) {
tab_away_goals[i,] = tab_away_goals[i,] - tab_away_goals[1,]
}
kable(tab_away_goals, digits = 4)
tibble(x = sims$pred_0$loglik_results_mod_0) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_0_pred_0, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 0 at minute 0")
sum(sims$pred_0$loglik_results_mod_0 <= loglik_observed_results_mod_0_pred_0) /
length(sims$pred_0$loglik_results_mod_0)
tibble(x = sims$pred_15$loglik_results_mod_0) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_0_pred_15, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 0 at minute 15")
sum(sims$pred_15$loglik_results_mod_0 <= loglik_observed_results_mod_0_pred_15) /
length(sims$pred_15$loglik_results_mod_0)
tibble(x = sims$pred_30$loglik_results_mod_0) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_0_pred_30, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 0 at minute 30")
sum(sims$pred_30$loglik_results_mod_0 <= loglik_observed_results_mod_0_pred_30) /
length(sims$pred_30$loglik_results_mod_0)
tibble(x = sims$pred_45$loglik_results_mod_0) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_0_pred_45, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 0 at minute 45")
sum(sims$pred_45$loglik_results_mod_0 <= loglik_observed_results_mod_0_pred_45) /
length(sims$pred_45$loglik_results_mod_0)
tibble(x = sims$pred_60$loglik_results_mod_0) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_0_pred_60, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 0 at minute 60")
sum(sims$pred_60$loglik_results_mod_0 <= loglik_observed_results_mod_0_pred_60) /
length(sims$pred_60$loglik_results_mod_0)
tibble(x = sims$pred_75$loglik_results_mod_0) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_0_pred_75, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 0 at minute 75")
sum(sims$pred_75$loglik_results_mod_0 <= loglik_observed_results_mod_0_pred_75) /
length(sims$pred_75$loglik_results_mod_0)
tibble(x = sims$pred_0$loglik_results_mod_3) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_3_pred_0, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 3 at minute 0")
sum(sims$pred_0$loglik_results_mod_3 <= loglik_observed_results_mod_3_pred_0) /
length(sims$pred_0$loglik_results_mod_3)
tibble(x = sims$pred_15$loglik_results_mod_3) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_3_pred_15, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 3 at minute 15")
sum(sims$pred_15$loglik_results_mod_3 <= loglik_observed_results_mod_3_pred_15) /
length(sims$pred_15$loglik_results_mod_3)
tibble(x = sims$pred_30$loglik_results_mod_3) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_3_pred_30, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 3 at minute 30")
sum(sims$pred_30$loglik_results_mod_3 <= loglik_observed_results_mod_3_pred_30) /
length(sims$pred_30$loglik_results_mod_3)
tibble(x = sims$pred_45$loglik_results_mod_3) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_3_pred_45, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 3 at minute 45")
sum(sims$pred_45$loglik_results_mod_3 <= loglik_observed_results_mod_3_pred_45) /
length(sims$pred_45$loglik_results_mod_3)
tibble(x = sims$pred_60$loglik_results_mod_3) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_3_pred_60, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 3 at minute 60")
sum(sims$pred_60$loglik_results_mod_3 <= loglik_observed_results_mod_3_pred_60) /
length(sims$pred_60$loglik_results_mod_3)
tibble(x = sims$pred_75$loglik_results_mod_3) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_3_pred_75, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 3 at minute 75")
sum(sims$pred_75$loglik_results_mod_3 <= loglik_observed_results_mod_3_pred_75) /
length(sims$pred_75$loglik_results_mod_3)
tibble(x = sims$pred_0$loglik_results_mod_8) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_8_pred_0, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 8 at minute 0")
sum(sims$pred_0$loglik_results_mod_8 <= loglik_observed_results_mod_8_pred_0) /
length(sims$pred_0$loglik_results_mod_8)
tibble(x = sims$pred_15$loglik_results_mod_8) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_8_pred_15, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 8 at minute 15")
sum(sims$pred_15$loglik_results_mod_8 <= loglik_observed_results_mod_8_pred_15) /
length(sims$pred_15$loglik_results_mod_8)
tibble(x = sims$pred_30$loglik_results_mod_8) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_8_pred_30, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 8 at minute 30")
sum(sims$pred_30$loglik_results_mod_8 <= loglik_observed_results_mod_8_pred_30) /
length(sims$pred_30$loglik_results_mod_8)
tibble(x = sims$pred_45$loglik_results_mod_8) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_8_pred_45, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 8 at minute 45")
sum(sims$pred_45$loglik_results_mod_8 <= loglik_observed_results_mod_8_pred_45) /
length(sims$pred_45$loglik_results_mod_8)
tibble(x = sims$pred_60$loglik_results_mod_8) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_8_pred_60, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 8 at minute 60")
sum(sims$pred_60$loglik_results_mod_8 <= loglik_observed_results_mod_8_pred_60) /
length(sims$pred_60$loglik_results_mod_8)
tibble(x = sims$pred_75$loglik_results_mod_8) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_8_pred_75, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 8 at minute 75")
sum(sims$pred_75$loglik_results_mod_8 <= loglik_observed_results_mod_8_pred_75) /
length(sims$pred_75$loglik_results_mod_8)
tibble(x = sims$pred_0$loglik_scores_mod_0) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_0_pred_0, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 0 at minute 0")
sum(sims$pred_0$loglik_scores_mod_0 >= loglik_observed_scores_mod_0_pred_0) /
length(sims$pred_0$loglik_scores_mod_0)
tibble(x = sims$pred_15$loglik_scores_mod_0) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_0_pred_15, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 0 at minute 15")
sum(sims$pred_15$loglik_scores_mod_0 <= loglik_observed_scores_mod_0_pred_15) /
length(sims$pred_15$loglik_scores_mod_0)
tibble(x = sims$pred_30$loglik_scores_mod_0) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_0_pred_30, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 0 at minute 30")
sum(sims$pred_30$loglik_scores_mod_0 <= loglik_observed_scores_mod_0_pred_30) /
length(sims$pred_30$loglik_scores_mod_0)
tibble(x = sims$pred_45$loglik_scores_mod_0) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_0_pred_45, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 0 at minute 45")
sum(sims$pred_45$loglik_scores_mod_0 <= loglik_observed_scores_mod_0_pred_45) /
length(sims$pred_45$loglik_scores_mod_0)
tibble(x = sims$pred_60$loglik_scores_mod_0) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_0_pred_60, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 0 at minute 60")
sum(sims$pred_60$loglik_scores_mod_0 <= loglik_observed_scores_mod_0_pred_60) /
length(sims$pred_60$loglik_scores_mod_0)
tibble(x = sims$pred_75$loglik_scores_mod_0) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_0_pred_75, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 0 at minute 75")
sum(sims$pred_75$loglik_scores_mod_0 <= loglik_observed_scores_mod_0_pred_75) /
length(sims$pred_75$loglik_scores_mod_0)
tibble(x = sims$pred_0$loglik_scores_mod_3) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_3_pred_0, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 3 at minute 0")
sum(sims$pred_0$loglik_scores_mod_3 <= loglik_observed_scores_mod_3_pred_0) /
length(sims$pred_0$loglik_scores_mod_3)
tibble(x = sims$pred_15$loglik_scores_mod_3) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_3_pred_15, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 3 at minute 15")
sum(sims$pred_15$loglik_scores_mod_3 <= loglik_observed_scores_mod_3_pred_15) /
length(sims$pred_15$loglik_scores_mod_3)
tibble(x = sims$pred_30$loglik_scores_mod_3) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_3_pred_30, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 3 at minute 30")
sum(sims$pred_30$loglik_scores_mod_3 <= loglik_observed_scores_mod_3_pred_30) /
length(sims$pred_30$loglik_scores_mod_3)
tibble(x = sims$pred_45$loglik_scores_mod_3) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_3_pred_45, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 3 at minute 45")
sum(sims$pred_45$loglik_scores_mod_3 <= loglik_observed_scores_mod_3_pred_45) /
length(sims$pred_45$loglik_scores_mod_3)
tibble(x = sims$pred_60$loglik_scores_mod_3) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_3_pred_60, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 3 at minute 60")
sum(sims$pred_60$loglik_scores_mod_3 <= loglik_observed_scores_mod_3_pred_60) /
length(sims$pred_60$loglik_scores_mod_3)
tibble(x = sims$pred_75$loglik_scores_mod_3) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_3_pred_75, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 3 at minute 75")
sum(sims$pred_75$loglik_scores_mod_3 <= loglik_observed_scores_mod_3_pred_75) /
length(sims$pred_75$loglik_scores_mod_3)
tibble(x = sims$pred_0$loglik_scores_mod_8) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_8_pred_0, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 8 at minute 0")
sum(sims$pred_0$loglik_scores_mod_8 <= loglik_observed_scores_mod_8_pred_0) /
length(sims$pred_0$loglik_scores_mod_8)
tibble(x = sims$pred_15$loglik_scores_mod_8) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_8_pred_15, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 8 at minute 15")
sum(sims$pred_15$loglik_scores_mod_8 <= loglik_observed_scores_mod_8_pred_15) /
length(sims$pred_15$loglik_scores_mod_8)
tibble(x = sims$pred_30$loglik_scores_mod_8) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_8_pred_30, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 8 at minute 30")
sum(sims$pred_30$loglik_scores_mod_8 <= loglik_observed_scores_mod_8_pred_30) /
length(sims$pred_30$loglik_scores_mod_8)
tibble(x = sims$pred_45$loglik_scores_mod_8) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_8_pred_45, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 8 at minute 45")
sum(sims$pred_45$loglik_scores_mod_8 <= loglik_observed_scores_mod_8_pred_45) /
length(sims$pred_45$loglik_scores_mod_8)
tibble(x = sims$pred_60$loglik_scores_mod_8) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_8_pred_60, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 8 at minute 60")
sum(sims$pred_60$loglik_scores_mod_8 <= loglik_observed_scores_mod_8_pred_60) /
length(sims$pred_60$loglik_scores_mod_8)
tibble(x = sims$pred_75$loglik_scores_mod_8) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_scores_mod_8_pred_75, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Scores model 8 at minute 75")
sum(sims$pred_75$loglik_scores_mod_8 <= loglik_observed_scores_mod_8_pred_75) /
length(sims$pred_75$loglik_scores_mod_8)
load("data/predictions_mod_0_dc.RData")
mean_mod_0 = NULL
seg_mom_mod_0 = NULL
for(i in 1:length(predictions_mod_0_dc)) {
predictions_mod_0_dc[[i]]$pred_0$Result[which(predictions_mod_0_dc[[i]]$pred_0$Result == 0)] = 10^-5
mean_mod_0[i] = predictions_mod_0_dc[[i]]$pred_0$Result[1] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[1]) +
predictions_mod_0_dc[[i]]$pred_0$Result[2] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[2]) +
predictions_mod_0_dc[[i]]$pred_0$Result[3] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[3])
seg_mom_mod_0[i] = predictions_mod_0_dc[[i]]$pred_0$Result[1] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[1])^2 +
predictions_mod_0_dc[[i]]$pred_0$Result[2] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[2])^2 +
predictions_mod_0_dc[[i]]$pred_0$Result[3] *
log(predictions_mod_0_dc[[i]]$pred_0$Result[3]^2)
}
mean_mod_0 = sum(mean_mod_0)
seg_mom_mod_0 = sum(seg_mom_mod_0)
var_mod_0 = seg_mom_mod_0 - mean_mod_0^2
tibble(x = sims$pred_0$loglik_results_mod_0) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_0_pred_0, col = "red") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 0 at minute 0")
tibble(x = sims$pred_0$loglik_results_mod_0) %>%
ggplot(aes(x = x)) +
geom_histogram(bins = 50) +
theme_bw() +
geom_vline(xintercept = loglik_observed_results_mod_0_pred_0, col = "red") +
geom_vline(xintercept = mean_mod_0, col = "blue") +
xlab("Simulated data") +
ylab("Count") +
ggtitle("Results model 0 at minute 0")
var_mod_0
mean_mod_0
exp(loglik_observed_results_mod_0_pred_0)
